#!/usr/bin/expect -f

set timeout 5

# Create the target file that config.yaml expects
exec echo "setting=initial" > /tmp/test-target.conf

# Start the TUI application
spawn stack exec terminal-config-manager

# Give the application time to start
sleep 1

# Quit the application
send "q"

# Wait for application to exit
expect {
    timeout {
        puts "ERROR: Application did not exit within timeout"
        exit 1
    }
    eof {
        puts "âœ“ SUCCESS: Application started and exited cleanly"
        # Cleanup
        exec rm -f /tmp/test-target.conf
        exit 0
    }
} 